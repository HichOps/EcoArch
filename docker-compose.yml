# ═══════════════════════════════════════════════════════════════
# docker-compose.yml – Stack de développement local EcoArch
# Usage : docker compose up -d
#
# Pour l'authentification GCP locale :
#   gcloud auth application-default login
#   export GOOGLE_APPLICATION_CREDENTIALS=~/.config/gcloud/application_default_credentials.json
# ═══════════════════════════════════════════════════════════════
services:
  ecoarch:
    build: .
    container_name: ecoarch_dev
    restart: unless-stopped
    ports:
      - "3000:3000"   # Frontend Reflex (dev)
      - "8000:8000"   # Backend API / WebSocket
    env_file:
      - .env
    environment:
      - GCP_PROJECT_ID=ecoarch-mvp-1768828854
      - API_URL=http://localhost:8000
    networks:
      - ecoarch_net

networks:
  ecoarch_net:
    driver: bridge